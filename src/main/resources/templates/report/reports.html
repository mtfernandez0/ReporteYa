<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
            crossorigin="anonymous">
    <link rel="stylesheet" href="lightbox2/css/lightbox.min.css">
    <script src="lightbox2/js/lightbox.min.js"></script>
</head>
<style>
    /* Estilo personalizado para el div con fondo púrpura */
    .container {
        height: 800px;
    }

    .image-gallery img {
        width: 100px;
        height: 100px;
    }

    ul {
        list-style-type: none;
    }

    .tags{
        font-weight: bolder;
    }

    .top {
        background-color: #46219c;
        padding: 20px; /* Espacio alrededor del contenido */
        text-align: center; /* Centra el contenido horizontalmente */
        margin-bottom: 18px;
        border-radius: 5px;
    }

    /* Estilo para el h1 con espacio entre las letras */
    h1 {
        letter-spacing: 4px; /* Ajusta el espacio entre letras */
        color: white; /* Cambia el color del texto a blanco */
    }

    /* Añade estilo personalizado para el contenedor de navegación */
    /*.scrollable-navbar {*/
    /*	max-height: 220px;*/
    /*	overflow-y: auto; !* Scroll vertical si es necesario *!*/
    /*	width: 200px;*/
    /*	border-radius: 5px;*/
    /*	background-color: #46219c;*/
    /*}*/

    .scrollable-navbar-container {
        display: none; /* Hide the container by default */
    }

    .scrollable-navbar-container h3 {
        padding-left: 5px;
        font-size: 1.5em;
    }

    .scrollable-navbar {
        max-height: 500px;
        border-radius: 5px;
        background-color: #46219c;
        overflow-y: auto;
    }

    .scrollable-navbar-container:has(.scrollable-navbar) {
        display: block; /* Show the container if it has .scrollable-navbar children */
    }

    .nav-link {
        font-size: 20px;
        padding: 5px 7px;
    }

    .custom-block {
        background-color: #f5f5f5;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 5px;
    }

    /* Añade estilo personalizado para el div de anuncios */
    .ad-container {
        background-color: #f0f0f0;
        padding: 20px;
        border-radius: 5px;
    }
</style>
<body>
<div class="top">
    <div class="row justify-content-center">
        <h1>REPORTES</h1>
    </div>
</div>
<div class="d-flex justify-content-center align-items-start mb-2">
    <p class="m-2">
        <a href="/">Inicio</a>
    </p>
    <p class="m-2">
        <a href="/map">Crear un reporte</a>
    </p>
    <p class="m-2">
        <a href="/profile">Cuenta</a>
    </p>
</div>
    <div class="container">
        <!-- Estructura de fila y columnas -->
        <div class="row">
            <!-- Columna para la navegación a la izquierda -->
            <div class="col-md-2 scrollable-navbar-container">
                <h3>Popular</h3>
                <div class="scrollable-navbar">
                    <!-- Cambia el texto dentro del enlace para tus necesidades -->
                    <a class="nav-link text-white" href="/reports">Todos</a>
                    <a th:each="tag : ${tagList}" class="nav-link text-white"
                       th:href="@{/reports/tags/{id}(id=${tag.id})}" th:text="${tag.subject}"></a>
                </div>
            </div>

            <!-- Columna para los bloques de reportes -->
            <div class="col-md-8">
                <div th:each="report : ${reports}">
                    <div class="custom-block">
                        <h4 th:text="${report.title}"></h4>
                        <div class="image-gallery">
                            <img th:each="image : ${report.images}"
                                 th:src="@{/images/reports/{name}(name=${image.nombre})}" alt="img"></img>
                        </div>
                        <br>
                        <p th:text="${report.description}"></p>
                        <div class="tags">
                            <ul class="p-0 d-flex gap-2">
                                <li th:each="tag : ${report.tags}" th:text="${'#'+tag.subject}"></li>
                            </ul>
                        </div>

                        <h3>Comentarios:</h3>
                        <ul class="p-0">
                            <li class="mb-1" th:each="comment : ${report.comments}"
                                th:text="${comment.owner.first_name + ' ' +  comment.owner.last_name + ': ' +  comment.comment}">
                            </li>
                        </ul>
                        <form th:action="@{'/reports/dashboard'}" method="post">
                            <input type="hidden" name="id" th:value="${report.id}"/>
                            <textarea name="comment" rows="4" cols="50" required></textarea>
                            <br>
                            <input class="btn btn-outline-dark" type="submit" value="Comentar">
                        </form>
                          <form th:action="@{'/reports/dashboardEmp'}" method="post">
                            <input type="hidden" name="id" th:value="${report.id}"/>
                            <textarea name="comment" rows="4" cols="50" required></textarea>
                            <br>
                            <input class="btn btn-outline-dark" type="submit" value="Comentar">
                        </form>
                    </div>
                </div>
            </div>
            <!-- Columna para el div de anuncios a la derecha -->
            <div class="col-md-2">
                <div class="d-flex justify-content-end">
                    <div class="ad-container ">
                        <!-- Contenido de anuncios -->
                        <h2>Anuncios</h2>
<!--                        <img src="imagen1.jpg" alt="Imagen anuncio" class="img-fluid mb-3">-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    lightbox.option({
        'resizeDuration': 200,
        'wrapAround': true
    });
</script>
</html>
